import{r as l,j as t}from"./app-CEKwIvuo.js";import{a as N}from"./axiosInstance-CpK50YgK.js";import{B as v,P as w,C as y,p as C,a as A,b as S,c as D,d as M,L as Y,A as E}from"./index-BKp4OnjW.js";y.register(C,A,S,D,M,Y,E);function B(){const[g,m]=l.useState([]),[s,b]=l.useState(new Date().getMonth()+1),[n,p]=l.useState(new Date().getFullYear());l.useEffect(()=>{N.get("/student/get-attendance").then(e=>m(e.data)).catch(e=>console.error(e))},[]);const o=g.filter(e=>{const a=new Date(e.date);return a.getMonth()+1===s&&a.getFullYear()===n}).reduce((e,a)=>{const i=a.subject_name,f=a.status;return e[i]||(e[i]={present:0,absent:0}),e[i][f]+=1,e},{}),r=Object.keys(o),c=r.map(e=>o[e].present),d=r.map(e=>o[e].absent),x={labels:r,datasets:[{label:"Present",data:c,backgroundColor:"rgba(75, 192, 192, 0.7)"},{label:"Absent",data:d,backgroundColor:"rgba(255, 99, 132, 0.7)"}]},j={labels:["Present","Absent"],datasets:[{data:[c.reduce((e,a)=>e+a,0),d.reduce((e,a)=>e+a,0)],backgroundColor:["rgba(75, 192, 192, 0.7)","rgba(255, 99, 132, 0.7)"]}]},u=["January","February","March","April","May","June","July","August","September","October","November","December"],h=[...new Set(g.map(e=>new Date(e.date).getFullYear()))];return t.jsxs("div",{className:"p-6 space-y-6 overflow-hidden",children:[t.jsxs("div",{className:"flex gap-4",children:[t.jsx("select",{className:"border p-2 rounded",value:s,onChange:e=>b(Number(e.target.value)),children:u.map((e,a)=>t.jsx("option",{value:a+1,children:e},a))}),t.jsx("select",{className:"border p-2 rounded",value:n,onChange:e=>p(Number(e.target.value)),children:h.length>0?h.map(e=>t.jsx("option",{value:e,children:e},e)):t.jsx("option",{children:new Date().getFullYear()})})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[t.jsxs("h2",{className:"text-lg font-bold mb-2",children:["Subject-wise Attendance (",u[s-1]," ",n,")"]}),r.length>0?t.jsx(v,{data:x}):t.jsx("p",{className:"text-gray-500",children:"No data for this month/year"})]}),t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[t.jsxs("h2",{className:"text-lg font-bold mb-2",children:["Overall Attendance (",u[s-1]," ",n,")"]}),c.length>0||d.length>0?t.jsx(w,{data:j}):t.jsx("p",{className:"text-gray-500",children:"No data for this month/year"})]})]})]})}export{B as default};
