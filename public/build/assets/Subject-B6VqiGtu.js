import{J as w,r as s,j as e}from"./app-CEKwIvuo.js";import{A as N}from"./AdminLayout-CPbZClx0.js";import{a as u}from"./axiosInstance-CpK50YgK.js";import{V as o}from"./index-CDLh0U6I.js";import{L as S}from"./Loader-BSxm8PVY.js";import{u as k}from"./adminContext-B4ZH0dBI.js";import{P as v}from"./plus-BwwImoXL.js";import"./menu-ClYTqC9x.js";import"./createLucideIcon-Bjxz-2FJ.js";import"./search-Ba20Hc8C.js";import"./bell-Ds8nJPYB.js";import"./user-Dye2o9pv.js";import"./x-CndvnG7B.js";import"./house-DBqdGzGq.js";import"./users-vopEeiFR.js";import"./settings-BNAerSY-.js";import"./log-out-BKbNxByv.js";import"./loader-circle-BsKjsRXP.js";function A(){const{props:i}=w(),{adminId:x}=i,{admin:b,permissions:h}=k();console.log("Admin:",h);const[r,d]=s.useState({subject:""}),[j,c]=s.useState(!1),[l,p]=s.useState([]),[g,a]=s.useState(!0),n=async()=>{try{a(!0);const t=await u.get(`/admin/${b.id}/subjects`);console.log(t.data),p(t.data||[])}catch{o.error("Failed to load subjects.")}finally{a(!1)}};s.useEffect(()=>{n()},[]);const f=t=>{d({...r,[t.target.name]:t.target.value})},m=()=>d({subject:""}),y=async t=>{if(t.preventDefault(),!r.subject.trim())return o.error("Subject name is required.");try{a(!0),await u.post("/admin/subjects",{subject:r.subject,created_by:x}),o.success("Subject added successfully!"),m(),c(!1),await n()}catch{o.error("Failed to save subject.")}finally{a(!1)}};return e.jsxs("div",{className:"p-6 bg-white dark:bg-gray-900 min-h-screen text-gray-900 dark:text-white relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Subjects"}),e.jsxs("button",{onClick:()=>c(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 flex items-center gap-2",children:[e.jsx(v,{className:"w-4 h-4"})," Add Subject"]})]}),e.jsx("div",{className:"overflow-x-auto bg-white dark:bg-gray-800 rounded-lg shadow",children:e.jsxs("table",{className:"min-w-full text-sm text-left text-gray-800 dark:text-white",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700 text-xs uppercase",children:e.jsx("tr",{children:e.jsx("th",{className:"px-4 py-2",children:"Subject"})})}),e.jsx("tbody",{children:g?e.jsx("tr",{children:e.jsx("td",{className:"px-4 py-4 text-center",colSpan:"1",children:e.jsx(S,{message:"Loading subjects..."})})}):l.length>0?l.map(t=>e.jsx("tr",{className:"border-b border-gray-200 dark:border-gray-600",children:e.jsx("td",{className:"px-4 py-2",children:t.subject})},t.id)):e.jsx("tr",{children:e.jsx("td",{className:"px-4 py-4 text-center text-gray-500 dark:text-gray-400",children:"No subjects found."})})})]})}),e.jsxs("div",{className:`fixed top-0 right-0 h-full w-full sm:w-[400px] bg-white dark:bg-gray-900 shadow-xl transition-transform duration-300 z-50 ${j?"translate-x-0":"translate-x-full"}`,children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Add Subject"}),e.jsx("button",{onClick:()=>{c(!1),m()},className:"text-gray-600 dark:text-gray-300 hover:text-red-600",children:"âœ•"})]}),e.jsxs("form",{onSubmit:y,className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Subject Name"}),e.jsx("input",{type:"text",name:"subject",value:r.subject,onChange:f,required:!0,className:"w-full px-4 py-2 border rounded dark:bg-gray-800 dark:text-white"})]}),e.jsx("button",{type:"submit",className:"bg-indigo-600 text-white w-full py-2 rounded hover:bg-indigo-700",children:"Save Subject"})]})]})]})}A.layout=i=>e.jsx(N,{children:i});export{A as default};
