import{r as l,j as e}from"./app-CEKwIvuo.js";import{u as g}from"./adminContext-B4ZH0dBI.js";import{A as C}from"./AdminLayout-CPbZClx0.js";import{a as p}from"./axiosInstance-CpK50YgK.js";import D from"./AdmitCardDataGet-Bm0TpKCO.js";import"./index-CDLh0U6I.js";import"./menu-ClYTqC9x.js";import"./createLucideIcon-Bjxz-2FJ.js";import"./search-Ba20Hc8C.js";import"./bell-Ds8nJPYB.js";import"./user-Dye2o9pv.js";import"./x-CndvnG7B.js";import"./house-DBqdGzGq.js";import"./users-vopEeiFR.js";import"./settings-BNAerSY-.js";import"./log-out-BKbNxByv.js";function k({admit_card_folders_data:n,folderId:c,batchId:i}){const{admin:r}=g(),[u,h]=l.useState([]),[m,d]=l.useState([]),[b,j]=l.useState(""),[y,_]=l.useState("");l.useEffect(()=>{const a=n.map(t=>({...t,exam_venue:"",exam_date:"",exam_time:""}));d(a),(async()=>{try{const t=await p.get(`/admin/${r.id}/class-rooms`);h(t.data.rooms)}catch(t){console.error(t)}})()},[n,r.id]);const o=(a,s,t)=>{const x=[...m];x[a][s]=t,d(x)},N=a=>{j(a);const s=m.map(t=>({...t,exam_date:a}));d(s)},f=a=>{_(a);const s=m.map(t=>({...t,exam_time:a}));d(s)},v=async a=>{try{const s={admin_id:r.id,folder_id:c,batch_id:i,enrollment_number:a.enrollment_number,subject_name:a.subject_name,batch_name:a.batch_name,teacher_name:a.teacher_name,student_name:a.student_name,exam_venue:a.exam_venue,exam_date:a.exam_date,exam_time:a.exam_time},t=await p.post(`/admin/${r.id}/admit-card/submit`,s);console.log("Saved successfully:",t.data),alert("Row saved successfully!")}catch(s){console.error("Error saving row:",s),alert("Failed to save row!")}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Bulk Exam Date"}),e.jsx("input",{type:"date",value:b,onChange:a=>N(a.target.value),className:"border px-2 py-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Bulk Exam Time"}),e.jsx("input",{type:"time",value:y,onChange:a=>f(a.target.value),className:"border px-2 py-1"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-4 py-2 text-left",children:"Enrollment Number"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Subject"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Batch"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Teacher"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Student"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Exam Venue"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Exam Date"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Exam Time"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Action"})]})}),e.jsx("tbody",{children:m.map((a,s)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border px-4 py-2",children:a.enrollment_number}),e.jsx("td",{className:"border px-4 py-2",children:a.subject_name}),e.jsx("td",{className:"border px-4 py-2",children:a.batch_name}),e.jsx("td",{className:"border px-4 py-2",children:a.teacher_name}),e.jsx("td",{className:"border px-4 py-2",children:a.student_name}),e.jsx("td",{className:"border px-4 py-2",children:e.jsxs("select",{value:a.exam_venue,onChange:t=>o(s,"exam_venue",t.target.value),className:"border px-2 py-1 w-full",children:[e.jsx("option",{value:"",children:"Select Venue"}),u.map(t=>e.jsx("option",{value:t.room_name,children:t.room_name},t.id))]})}),e.jsx("td",{className:"border px-4 py-2",children:e.jsx("input",{type:"date",value:a.exam_date,onChange:t=>o(s,"exam_date",t.target.value),className:"border px-2 py-1 w-full"})}),e.jsx("td",{className:"border px-4 py-2",children:e.jsx("input",{type:"time",value:a.exam_time,onChange:t=>o(s,"exam_time",t.target.value),className:"border px-2 py-1 w-full"})}),e.jsx("td",{className:"border px-4 py-2",children:e.jsx("button",{onClick:()=>v(a),className:"bg-blue-500 text-white px-3 py-1 rounded",children:"Submit"})})]},s))})]})}),e.jsx(D,{folder_id:c,admin_id:r.id,batch_id:i})]})}k.layout=n=>e.jsx(C,{children:n});export{k as default};
